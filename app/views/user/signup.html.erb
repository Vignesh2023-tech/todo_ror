<form method="post" action="/signup" onsubmit=signup(event)>
  <%= token_tag %>
  <div class="col-6" style="margin: 0 auto;">
    <div class="col-6" style="margin: 0 auto;">
      <h1>Register</h1>
      <div class="mb-3">
        <label for="name" class="form-label"> Name </label>
        <input type="name" class="form-control" placeholder="Enter your name" pattern="^[A-Za-z.]+$" title="Enter alphabet without space" id="name" name="name" aria-describedby="nameHelp" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email address</label>
        <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" pattern="^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$" title="Enter a valid email address" aria-describedby="emailHelp" required>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" placeholder="Enter your password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8}"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" name="password" required>
      </div>
      <button type="submit" class="btn btn-primary">Register</button>
      <div>
        <a href="/login"> Already have an account</a>
      </div>
    </div>
  </form>
  <script>
    const signup = e => {

    let name = document.getElementById("name").value.trim();
    let email = document.getElementById("email").value.trim();
    let password = document.getElementById("password").value.trim();

    let name_pattern = /^[A-Za-z.]+$/;
    let email_pattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    let password_pattern = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8}/;

    if (name.length === 0 || !name_pattern.test(name)) {
      alert("Please enter a valid name");
      e.preventDefault();
    }

    if (email.length === 0 || !email_pattern.test(email)) {
      alert("Please enter a valid email");
      e.preventDefault();
    }

    if (password.length < 8 || !password_pattern.test(password)) {
      alert("Please enter a valid password");
      e.preventDefault();
    }

    }
  </script>
